(this.webpackJsonpwildfire=this.webpackJsonpwildfire||[]).push([[0],{10:function(e){e.exports=JSON.parse('{"site":{"name":"CalGuard","style":{"background":"linear-gradient(to bottom, rgba(255,255,255,0.15) 0%, rgba(0,0,0,0.15) 100%),radial-gradient(at top left, rgba(255,255,255,0.40) 0%, rgba(0,0,0,0.40) 120%) #989898"},"api":{"map":"http://localhost:4000/api/map","db":"http://localhost:4000/api/db","incident":"/api/incident","ip":"http://ip-api.com/json/?fields=57577","zip":"https://us-zipcode.api.smartystreets.com/lookup?auth-id=21102174564513388&zipcode={zipcode}"}}}')},70:function(e,t,a){e.exports=a(84)},76:function(e,t,a){},84:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(23),i=a.n(o),s=(a(75),a(76),a(46)),l=a(19),c=a.n(l),u=a(31),d=a(14),m=a(56),f=a.n(m),p=a(10),g=function(e){var t=e.background,a=e.children;return r.a.createElement("div",{style:{background:t,backgroundBlendMode:"multiply,multiply",minHeight:"100vh",display:"flex",flexDirection:"row"}},a)},y=a(90),h=function(e){var t=e.name;return r.a.createElement(y.a,{variant:"dark"},r.a.createElement(y.a.Brand,{style:{fontFamily:"arial",fontWeight:900,letterSpacing:".5rem",textTransform:"uppercase"},href:"/"},t))},b=function(e){e.name;return r.a.createElement(y.a,{variant:"dark",className:"justify-content-center"},r.a.createElement(y.a.Text,{style:{fontFamily:"arial",fontWeight:900,letterSpacing:".5rem",textTransform:"uppercase",textAlign:"center"},href:"/"},"raw data from usda & ca gov"))},E=a(59),v=a(29),k=a(9),x=Object(E.animated)((function(e){var t=e.data,a=e.incident,n=e.db,o=e.selectedCounty,i=e.onSelectCounty,s=e.zoomed;return r.a.createElement(v.ComposableMap,{projection:"geoAzimuthalEqualArea",projectionConfig:{rotate:[119.5,322.5,40],scale:4800},style:{maxHeight:s?"calc(100vh - 2 * 56px)":"calc(50vh - 56px)",marginTop:s?"0":"calc(25vh - 28px)",marginBottom:s?"0":"calc(25vh - 28px)",transition:"max-height 300ms ease, margin 300ms ease",overflow:"visible"},onClick:function(e){return i(e,null)}},r.a.createElement("style",{scoped:!0},"\n        .county {\n          transition: fill 300ms ease;\n        }\n        :focus {\n          outline: none;\n        }\n      "),r.a.createElement(v.Geographies,{geography:t},(function(e){return e.geographies.map((function(e){return r.a.createElement(v.Geography,{id:e.rsmKey,key:e.rsmKey,geography:e,fill:"#EEE",stroke:null!=o&&o.rsmKey===e.rsmKey?"#000":"#CCC",strokeWidth:2,className:"county",onClick:function(t){return i(t,e)}})}))})),null!=o&&r.a.createElement("use",{href:"#".concat(o.rsmKey)}),r.a.createElement("radialGradient",{id:"fireMarker"},r.a.createElement("stop",{offset:"0%",stopColor:"rgba(255, 0, 0, 0.75)"}),r.a.createElement("stop",{offset:"100%",stopColor:"rgba(255, 255, 0, 0)"})),n&&n.objects.myJson.geometries.map((function(e){var t=e.properties,a=e.coordinates;return"burned"===t.prediction&&r.a.createElement(v.Marker,{coordinates:a},r.a.createElement("circle",{r:20,fill:"url(#fireMarker)",style:{pointerEvents:"none"}}))})),a&&a.map((function(e){var t=e.Latitude,a=e.Longitude,n=e.AcresBurned;return a&&t&&r.a.createElement(v.Marker,{coordinates:[a,t]},r.a.createElement(k.b,{style:{color:n>0?"red":"yellow",fontSize:"2rem",pointerEvents:"none"}}))})))})),w=a(88),j=a(89),C=a(91),S=function(e){var t=e.selectedCounty,a=e.incident;return r.a.createElement(w.a,{fluid:!0,style:{height:"100vh",backgroundColor:"#1E212B",paddingTop:"1rem",overflowY:"scroll"}},r.a.createElement("h1",{style:{color:"white",fontFamily:"arial",fontWeight:900,textTransform:"uppercase",letterSpacing:"1.25rem",textAlign:"center"}},null===t?"California":t.properties.name),r.a.createElement(j.a,{style:{marginTop:"2rem"}},a&&a.filter((function(e){var a=e.County;return null===t||a===t.properties.name})).map((function(e){return r.a.createElement(C.a,{style:{width:"calc(50% - 30px)",flex:"none",marginBottom:".5rem"}},r.a.createElement(C.a.Header,null,r.a.createElement(C.a.Title,null,e.Name),r.a.createElement(C.a.Subtitle,null,e.AdminUnit)),r.a.createElement(C.a.Body,null,r.a.createElement(C.a.Text,null,"Location: ",e.Location),r.a.createElement(C.a.Text,null,"Latitude: ",e.Latitude),r.a.createElement(C.a.Text,null,"Longitude: ",e.Longitude),r.a.createElement(C.a.Text,null,"Acres Burned: ",e.AcresBurned)),r.a.createElement(C.a.Footer,null,r.a.createElement(C.a.Text,null,e.Started)))}))))},O=function(e){var t=e.toggled,a=e.onToggle;return r.a.createElement("div",{style:{position:"absolute",right:0,top:0,width:56,height:56},onClick:a},r.a.createElement(k.a,{style:{transition:"transform 300ms ease",transform:t?"rotate(180deg)":"rotate(0deg)",width:56,height:56},fill:"white"}))},z=function(e){var t=e.display,a=e.background,n=e.name,o=e.status,i=e.loadData;return r.a.createElement("div",{style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",opacity:t?1:0,transition:"opacity 300ms ease 300ms",pointerEvents:t?"auto":"none",background:a}},r.a.createElement("div",{style:{position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -50%)"}},r.a.createElement("h1",{style:{color:"white",fontSize:"8rem",fontFamily:"arial",fontWeight:900,letterSpacing:"4rem",textTransform:"uppercase",margin:"4rem"}},n),r.a.createElement("style",{scoped:!0},"\n          @-webkit-keyframes statusblink {\n            0% {\n              transform: scale(1.1);\n            }\n            100% {\n              transform: scale(1);\n            }\n          }\n          .status {\n            width: 50%;\n            display: inline-block;\n            text-align: center;\n            letter-spacing: .25rem;\n            text-transform: uppercase;\n            transition: color 300ms ease;\n          }\n          .status.loading {\n            color: white;\n          }\n          .status.loading svg {\n            animation: statusblink 300ms ease infinite alternate;\n          }\n          .status.success {\n            color: #3498db;\n          }\n          .status.failed {\n            color: #e74c3c;\n          }\n          .status.failed svg {\n            transition: transform 300ms ease;\n          }\n          .status.failed:hover svg {\n            transform: rotate(-180deg);\n          }\n        "),r.a.createElement("div",{className:["status",o.map].join(" ")},"failed"!==o.map&&r.a.createElement(k.c,{style:{fontSize:"8rem",margin:"1rem"}}),"failed"===o.map&&r.a.createElement(k.f,{style:{fontSize:"8rem",margin:"1rem"},onClick:i}),r.a.createElement("br",null),r.a.createElement("span",null,{loading:"Loading map information",success:"Map information loaded",failed:"Failed loading map infomation"}[o.map])),r.a.createElement("div",{className:["status",o.db].join(" ")},"failed"!==o.db&&r.a.createElement(k.e,{style:{fontSize:"8rem",margin:"1rem"}}),"failed"===o.db&&r.a.createElement(k.f,{style:{fontSize:"8rem",margin:"1rem"},onClick:i}),r.a.createElement("br",null),r.a.createElement("span",null,{loading:"Loading wild fire predictions",success:"Wild fire predictions loaded",failed:"Failed loading wild fire predictions"}[o.db]))))},T=function(e){var t=e.location,a=e.background;return r.a.createElement("div",{style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",opacity:"loading"===t.status?1:0,transition:"opacity 300ms ease 300ms",pointerEvents:"loading"===t.status?"auto":"none",color:"white",background:a}},r.a.createElement("style",{scoped:!0},"\n      @-webkit-keyframes statusjump {\n        0% {\n          transform: translateY(-10%);\n        }\n        100% {\n          transform: translateX(0);\n        }\n      }\n      .status1 {\n        transition: color 300ms ease;\n      }\n      .status1.loading {\n        color: white;\n      }\n      .status1.loading svg {\n        animation: statusjump 300ms ease infinite alternate;\n      }\n      .status1.success {\n        color: #3498db;\n      }\n      .status1.failed {\n        color: #e74c3c;\n      }\n    "),r.a.createElement("div",{style:{position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -50%)",textAlign:"center",letterSpacing:".25rem",textTransform:"uppercase",transition:"color 300ms ease"},className:["status1",t.status].join(" ")},r.a.createElement(k.d,{style:{fontSize:"8rem",margin:"1rem"}}),r.a.createElement("br",null),r.a.createElement("span",null,{loading:"Finding your location",success:"Found your location",failed:"Failed finding your location"}[t.status]),r.a.createElement("div",{style:{margin:"2rem"}},r.a.createElement("h1",null,t.data&&t.data.query?t.data.query:"IP Address"),r.a.createElement("h1",null,t.data&&t.data.country?t.data.country:"Country / Region"),r.a.createElement("h1",null,t.data&&t.data.regionName?t.data.regionName:"State / Province"),r.a.createElement("h1",null,t.data&&t.data.county?t.data.county:"County"))))},L=function(){var e=Object(n.useState)(null),t=Object(d.a)(e,2),a=t[0],o=t[1],i=Object(n.useState)(!1),l=Object(d.a)(i,2),m=l[0],y=l[1],E=Object(n.useState)({status:"loading"}),v=Object(d.a)(E,2),k=v[0],w=v[1],j=Object(n.useState)({status:"loading"}),C=Object(d.a)(j,2),L=C[0],F=C[1],B=Object(n.useState)({status:"loading"}),A=Object(d.a)(B,2),N=A[0],M=A[1],W=Object(n.useState)({status:"loading"}),K=Object(d.a)(W,2),G=K[0],J=K[1],q=function(){var e=Object(u.a)(c.a.mark((function e(){var t,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Loading map information"),e.next=3,fetch(p.site.api.map);case 3:if(!(t=e.sent).ok){e.next=14;break}return e.next=7,t.json();case 7:a=e.sent,w({status:"success",data:a}),console.log("Map information loaded"),I(),H(),e.next=16;break;case 14:w({status:"failed"}),console.log("Failed loading map infomation");case 16:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),D=function(){var e=Object(u.a)(c.a.mark((function e(){var t,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Loading wild fire predictions"),e.next=3,fetch(p.site.api.db);case 3:if(!(t=e.sent).ok){e.next=12;break}return e.next=7,t.json();case 7:a=e.sent,F({status:"success",data:a}),console.log("Wild fire predictions loaded"),e.next=14;break;case 12:F({status:"failed"}),console.log("Failed loading wild fire predictions");case 14:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),H=function(){var e=Object(u.a)(c.a.mark((function e(){var t,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Loading incident data"),e.next=3,fetch(p.site.api.incident);case 3:if(!(t=e.sent).ok){e.next=12;break}return e.next=7,t.json();case 7:a=e.sent,M({status:"success",data:a}),console.log("Incident data loaded"),e.next=14;break;case 12:M({status:"failed"}),console.log("Failed loading incident data");case 14:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),I=function(){var e=Object(u.a)(c.a.mark((function e(){var t,a,n,r,i;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Loading location data"),e.next=3,fetch(p.site.api.ip);case 3:if(!(t=e.sent).ok){e.next=32;break}return e.next=7,t.json();case 7:if("United States"===(a=e.sent).country&&"California"===a.regionName){e.next=13;break}J({status:"success",data:a}),console.log("Location data loaded"),e.next=30;break;case 13:return J({status:"loading",data:a}),e.next=16,fetch(f()(p.site.api.zip,a.zip));case 16:if(!(n=e.sent).ok){e.next=28;break}return e.next=20,n.json();case 20:r=e.sent,i=r[0].zipCodes[0].county_name,J({status:"success",data:Object(s.a)(Object(s.a)({},G.data),{},{county:i})}),console.log("Location data loaded"),o(k.data.objects.subunits.geometries.filter((function(e){return e.properties.name===i}))[0]),y(!0),e.next=30;break;case 28:J({status:"failed"}),console.log("Failed loading location data");case 30:e.next=33;break;case 32:J({status:"failed"});case 33:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),P=function(){"failed"===k.status||"failed"===L.status?"failed"===k.status?(w({status:"loading"}),q()):"failed"===L.status&&(F({status:"loading"}),D()):"loading"===k.status&&"loading"===L.status&&(q(),D())};Object(n.useEffect)(P);var U=function(e){return"".concat(e,"vw")};return r.a.createElement(g,{background:p.site.style.background},r.a.createElement("div",{style:{width:U(m?50:100),transition:"width 300ms ease",position:"relative"}},r.a.createElement(h,{name:p.site.name}),k.data&&r.a.createElement(x,{data:k.data,incident:N.data,db:L.data,selectedCounty:a,onSelectCounty:function(e,t){null==t||m||y(!0),o(t),e.stopPropagation()},zoomed:!m}),r.a.createElement(b,null),r.a.createElement(O,{toggled:m,onToggle:function(){y(!m)}})),r.a.createElement("div",{style:{width:U(m?50:0),transition:"width 300ms ease"}},r.a.createElement(S,{selectedCounty:a,incident:N.data})),r.a.createElement(T,{location:G,background:p.site.style.background,setSelectedCounty:o}),r.a.createElement(z,{display:"success"!==k.status&&"success"!==L.status,background:p.site.style.background,name:p.site.name,status:{map:k.status,db:L.status},loadData:P}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(L,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[70,1,2]]]);
//# sourceMappingURL=main.f9cef631.chunk.js.map